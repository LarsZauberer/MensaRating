{% extends "base.html" %}
{% load static %}
{% block content %}




<main id="menu">
    <h1>
        {{name}}   

        {% if vegetarian %}
        <img class="vegivegan-label" src="{% static 'images/vegetarian.png' %}" alt="vegetarian">
        {% elif vegan %}
        <img class="vegivegan-label" src="{% static 'images/vegan.png' %}" alt="vegan">
        {% endif %} 

    </h1>

    <div style="margin-bottom: 2em;">{{description}}</div>


    


    <div id="gallery">  <!-- TODO: image gallery -->
        <button> &lt; </button>

        <div id="images">
            <img src="{% static 'images/no_images_yet.png' %}" alt="no images">
            <div id="image-functions"> <!-- TODO: image functions -->
                <div>user</div> 

                {% if today %}
                <button>like</button>
                <button>dislike</button> 
                <form method="upload" enctype="multipart/form-data">
                    {% csrf_token %}
                    {{ imageForm }}
                    <button type="submit">Post</button>
                </form>
                {% endif %}

                <div>num-likes</div>
            </div>
        </div>
        
        <button> &gt; </button>
    </div>
    <!--
        <h3>Images</h3>
        <ul>
            {% for image in images %}
                <p>{{image.profil.user.username}}#{{image.profil.karma}}</p>
                <li><img src="{{image.image.url}}" alt="{{image.image.name}}" width="100" height="100"></li>
            {% endfor %}
        </ul>
    -->
    

    <p>occurrences: {{occurrences}}</p>
    

    <div class="rating">
        ({{allTimeRating}})
        <div class="stars">
            <div class="emptystars"></div>
            <div id="stars-alltime" class="fullstars"></div>
            <div class="starshape"></div>
        </div>
    </div>

    
    
    

    


    <div style="width: 100%;">
        <div class="fade_scroll_top">
            <h1>
                Alle Men√ºs
                <button>order</button>
            </h1>
        </div>
        <div class="line"></div>

        {% for index, rating, menu in menu_instances %}
            <div class="galleryElement" onclick="location.href='{% url 'menu' menu.pk %}';">
                <div class="menuListbox clickableDiv">
                    <a href="{% url 'menu' menu.pk %}">{{menu.name}}</a>
                    - {{menu.date}}
                    
                    {% if menu.vegetarian %}
                    <img class="vegivegan-label" src="{% static 'images/vegetarian.png' %}" alt="vegetarian">
                    {% elif menu.vegan %}
                    <img class="vegivegan-label" src="{% static 'images/vegan.png' %}" alt="vegan">
                    {% endif %} 

                    <div class="rating">
                        ({{rating}})
                        <div class="stars">
                            <div class="emptystars"></div>
                            <div id="stars-{{index}}" class="fullstars"></div>
                            <div class="starshape"></div>
                        </div>
                    </div>
                </div>
            </div>

            <script data-menuindex="{{index}}" data-rating="{{rating}}">
                data = document.currentScript.dataset;
                starRate(data.menuindex, data.rating)
            </script>    
        {% endfor %}




            

        
    </div>


    <script data-rating="{{allTimeRating}}">
        data = document.currentScript.dataset;
        starRate("alltime", data.rating)
    </script>




    




    





    

    

    {% if messages %}
    {% for i in messages %}
    {% autoescape off %}
    {% if i.tags == "error" %}
    <div role="alert" class="alert error"><span>{{i}}</span></div>
    {% else %}
    <div role="alert" class="alert success"><span>{{i}}</span></div>
    {% endif %}
    {% endautoescape %}
    {% endfor %}
    {% endif %}


    


    

</main>

{% endblock %}