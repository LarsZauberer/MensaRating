{% extends "base.html" %}
{% load static %}

{% block import %}
<link rel="stylesheet" href="{% static 'css/posts.css' %}">
<script src="{% static 'js/imageSlideshow.js' %}"></script>
{% endblock %}

{% block content %}

<h1>Menu</h1>

<h2>{{menu.name}}</h2>
<p>{{menu.description}}</p>
<p>Rating Today: {{rating}}</p>
<p>All time Rating: {{allTimeRating}}</p>

<a href="{% url 'menuType' menu.menuType.pk %}">Menu Type</a>

<!-- https://www.w3schools.com/howto/howto_js_slideshow.asp -->
<h3>Images</h3>
<div class="imageContainer">
    {% for image in images %}
        <div class="imageSlide fade">
            <p class="userName imageUserText">{{image.profil.user.username}}#{{image.profil.karma}}</p>
            <div class="imgContainer">
                <img src="{{image.image.url}}" alt="{{image.image.name}}" class="imageImage">
            </div>
            <div class="imageButtons">
                <p class="likeText imageLikeText">Likes: {{image.likes}}</p>
                <button class="like imageLike">Like</button>
            </div>
        </div>
    {% endfor %}

    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
    <a class="next" onclick="plusSlides(1)">&#10095;</a>
</div>

<script>
    setInterval(checkOrientation, 500)
    showSlides(slideIndex);
</script>

<h3>Reviews</h3>
<ul>
    {% for review in reviews %}
        <p>{{review.profil.user.username}}#{{review.profil.karma}}</p>
        <li>{{review.text}}</li>
    {% endfor %}
</ul>

{% if messages %}
{% for i in messages %}
{% autoescape off %}
{% if i.tags == "error" %}
<div role="alert" class="alert error"><span>{{i}}</span></div>
{% else %}
<div role="alert" class="alert success"><span>{{i}}</span></div>
{% endif %}
{% endautoescape %}
{% endfor %}
{% endif %}

{% if today %}
<form method="post">
    {% csrf_token %}
    {{ ratingForm }}
    <button type="submit">Post</button>
</form>

<form method="post">
    {% csrf_token %}
    {{ reviewForm }}
    <button type="submit">Post</button>
</form>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ imageForm }}
    <button type="submit">Post</button>
</form>
{% endif %}

{% endblock %}